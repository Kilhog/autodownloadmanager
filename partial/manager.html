<div class="page-header" layout="row">
  <h1 style="margin-top: 0" flex>
    Manager
  </h1>
  <md-button style="height: 36px;font-style: normal;" class="md-raised md-accent"
             ng-disabled="!user.token || synchroInProgress" ng-click="synchroAll()">Recharger
  </md-button>
</div>

<div>
  <md-content class="md-padding">
    <md-tabs md-dynamic-height md-border-bottom>
      <md-tab label="Mes séries en retard">
        <md-content class="md-padding">
          <div ng-if="synchroInProgress">
            <div layout="row" layout-sm="column" layout-align="space-around">
              <md-progress-circular md-mode="indeterminate"></md-progress-circular>
            </div>
            <h3 class="synch_text">Synchronisation des épisodes en cours</h3>
          </div>

          <div ng-if="!synchroInProgress" ng-repeat="show in episodesUnseen.shows track by $index">
            <h4>
              <a style="cursor: pointer" ng-click="changeTarget($event, show.title)">> {{show.title}}</a>
            </h4>
            <div layout="row" layout-wrap style="margin-bottom: 2px">
              <div flex="50" ng-repeat="unseen in show.unseen" class="prevent-line-break">
                <md-button aria-label="Marquer comme vu" ng-click="seenEpisode($parent.$index, $index)" class="md-fab md-xs md-accent" style="margin-left: 3px !important;">
                  <md-tooltip md-direction="right" md-autohide="true">
                    Marquer comme vu
                  </md-tooltip>
                  <md-icon md-font-icon="fa fa-eye"></md-icon>
                </md-button>
                <md-button aria-label="Télécharger" ng-click="downloadEpisode(unseen)" class="md-fab md-xs md-accent">
                  <md-tooltip md-direction="right" md-autohide="true">
                    Télécharger
                  </md-tooltip>
                  <md-icon md-font-icon="fa fa-cloud-download"></md-icon>
                </md-button>
                <md-button aria-label="Sous-titres" ng-click="downloadStr(unseen)" class="md-fab md-xs md-accent">
                  <md-tooltip md-direction="right" md-autohide="true">
                    Sous-titres
                  </md-tooltip>
                  <md-icon md-font-icon="fa fa-align-center"></md-icon>
                </md-button>
                &nbsp;
                <span class="season-and-episode-identifier">S{{unseen.season | numberFixedLen:2}}E{{unseen.episode | numberFixedLen:2}}</span>
                - {{unseen.title}}
              </div>
            </div>
            <hr/>
          </div>
        </md-content>
      </md-tab>
      <md-tab label="Mes séries surveillées">
        <md-content class="md-padding">
          <p style="text-align: center;">Dans la prochaine mise à jour ;)</p>
        </md-content>
      </md-tab>
    </md-tabs>
  </md-content>
</div>

<div layout="row" layout-align="center">
  <md-button class="md-raised md-accent" ng-disabled="!user.token || synchroInProgress" ng-click="synchroAll()">
    Recharger
  </md-button>
</div>
<br/>
