"use strict";!function(){function e(){}function t(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";var r=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,r),2)+""+t[r]}var r=require("request"),o=(require("cheerio"),require("moment"),"https://torrentapi.org");e.prototype.searchTheBest=function(e,t){},e.prototype.searchAll=function(e){return new Promise(function(s,n){var i=e.split(" ").join("+"),a=[],u=o+"/pubapi_v2.php?get_token=get_token&app_id=Torrentflix";r(u,function(e,u,p){if(e||200!==u.statusCode)n();else{var l=JSON.parse(p),c=l.token,h=o+"/pubapi_v2.php?mode=search&search_string="+i+"&sort=seeders&format=json_extended&token="+c;r(h,function(e,r,o){if(e||200!==r.statusCode)n();else{l=JSON.parse(o);for(var i in l.torrent_results){var u=l.torrent_results[i].title,p=l.torrent_results[i].download,c=l.torrent_results[i].seeders,h=l.torrent_results[i].leechers,f=t(l.torrent_results[i].size),d={title:u,category:"",seeds:c,leechs:h,size:f,torrentLink:p,tracker:"rarbg"};a.push(d)}s(a)}})}})})},module.exports=e}();