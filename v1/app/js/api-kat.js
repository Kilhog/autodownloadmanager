"use strict";!function(){function e(){}var t=require("superagent"),r="https://kat.cr",n=r+"/json.php";e.prototype.searchTheBest=function(e,r){return new Promise(function(i,l){t.get(n).query({q:e,field:"seeders",order:"desc"}).end(function(e,t){if(t=JSON.parse(t.text),e)l(null);else if(t.list.length>0){var n=!0,o=!1,s=void 0;try{for(var u,a=t.list[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var f=u.value;if("480p"==r&&-1==f.title.indexOf("720p")||"720p"==r&&f.title.indexOf("720p")>-1)return i({title:f.title,torrentLink:f.torrentLink,seeds:f.seeds}),!1}}catch(d){o=!0,s=d}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw s}}}l(null)})})},e.prototype.searchAll=function(e){return new Promise(function(r,i){t.get(n).query({q:e,field:"seeders",order:"desc"}).end(function(e,t){if(t=JSON.parse(t.text),e)i(null);else if(t.list.length>0){var n=[],l=!0,o=!1,s=void 0;try{for(var u,a=t.list[Symbol.iterator]();!(l=(u=a.next()).done);l=!0){var f=u.value;n.push({title:f.title,torrentLink:f.torrentLink,seeds:f.seeds,tracker:"kat"})}}catch(d){o=!0,s=d}finally{try{!l&&a["return"]&&a["return"]()}finally{if(o)throw s}}r(n)}else i(null)})})},module.exports=e}();